import { getCountry } from 'react-native-localize';
import { useEffect, useState } from 'react';
import { Platform } from 'react-native';

const RAMP_SUPPORTED_COUNTRIES = [
  'et',
  'ag',
  'ca',
  'ic',
  'au',
  'dk',
  'gf',
  'ax',
  'cv',
  'cx',
  'gl',
  'mk',
  'me',
  'fr',
  'hr',
  'dj',
  'dm',
  'do',
  'ee',
  'pf',
  'gp',
  'hk',
  'my',
  'yt',
  'fm',
  'nc',
  'nz',
  'nu',
  'nf',
  'no',
  'pl',
  'pt',
  're',
  'bl',
  'sh',
  'lc',
  'pm',
  'vc',
  'it',
  'rs',
  'sx',
  'us',
  'ad',
  'ae',
  'gi',
  'bw',
  'sm',
  'uy',
  'wf',
  'gh',
  'gn',
  'gm',
  'at',
  'be',
  'bz',
  'bq',
  'ba',
  'nl',
  'gt',
  'gu',
  'zm',
  'td',
  'tg',
  'br',
  'bn',
  'cc',
  'cz',
  'gq',
  'fk',
  'fo',
  'fi',
  'hn',
  'mq',
  'sl',
  'rw',
  'mx',
  'nr',
  'mt',
  'lk',
  'bt',
  'mg',
  'mr',
  'bm',
  'is',
  'km',
  'cg',
  'ck',
  'cy',
  'ge',
  'gr',
  'gd',
  'ie',
  'lv',
  'lu',
  'hu',
  'ki',
  'kw',
  'li',
  'lt',
  'mh',
  'md',
  'mp',
  'pg',
  'pe',
  'ro',
  'mf',
  'st',
  'sg',
  'sk',
  'se',
  'ar',
  'sb',
  'cl',
  'cr',
  'sv',
  'gg',
  'im',
  'je',
  'py',
  'sr',
  'sz',
  'th',
  'tl',
  'to',
  'tm',
  'tc',
  'tv',
  'uz',
  'va',
  'de',
  'ua',
  'bg',
  'al',
  'si',
  'co',
  'il',
  'ph',
  'tr',
  'es',
  'gb',
  'ch',
  'tk',
];

export const useIsRampAvailable = () => {
  const isAndroid = Platform.OS === 'android';
  const [isRampAvailable, setIsRampAvailable] = useState(isAndroid);
  const country = getCountry();

  useEffect(() => {
    checkRampAvailability();
  }, []);

  const checkRampAvailability = () => {
    if (isAndroid) return;
    setIsRampAvailable(RAMP_SUPPORTED_COUNTRIES.includes(country.toLowerCase()));
  };

  return { isRampAvailable };
};
